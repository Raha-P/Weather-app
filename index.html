<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather app</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
</head>
<style>

#body {
    background-image: url("https://images.unsplash.com/photo-1496450681664-3df85efbd29f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MjB8fHdlYXRoZXJ8ZW58MHx8MHx8&w=1000&q=80");
    background-size: cover;
    background-repeat: no-repeat;
    width: 100%;
    height: 100%;
}
    


    .special {
    background-image: url("https://wallpaperaccess.com/full/3056348.jpg");
    background-color: #cccccc;
    background-size: 100% ;
   
}

    .app {
    border: 1px solid rgb(247, 241, 247);
    border-radius: 10px;
    }


    .wrapper {
    max-width: 950px;
    margin: 30px auto;
    padding: 20px ;
    }

    .searchBox {
        padding-left: 280px;
        padding-top: 30px;
        top: 25px;
        left: 230px;
        display: block;
        width: 100%;
        appearance: none;
       
    }

    .todayStatus {
        text-align: center;
        font-size: 20px;
        font-family: Segoe UI', Tahoma, Geneva, Verdana, sans-serifs;

    }

    .city {
        font-size: 30px;
        font-family: Tahoma;
    }

    #day {
        color: rgb(216, 213, 216);;
    }
    #clock {color: rgb(216, 213, 216);;
    }

    .firstweather {
        font-size: 35px;
        color: white;
        font-family: Tahoma;
    }

    .mainemoji {
        font-size: 50px;
    }

    .degree {
        font-size: 35px;
        color: black;
    }

    #celsius {
        font-size: 20px;
    }
    #faren {
        font-size: 20px;
    }

    .details {
        font-size: 16px;
        color: rgb(216, 213, 216);;
    }

    .futureforecast {
        color: rgb(216, 213, 216);
        font-size: 24px;
        margin: 0 auto;
        display: block;
        
    }

    .otherdays {
        font-size: 18px;
        color: rgb(216, 213, 216);
    }

    .emoji1,
    .emoji2,
    .emoji3,
    .emoji4,
    .emoji5 {
        font-size: 30px;
    }

    .btn-outline-light {
        margin: 0px 10px;
    }
    .codeby {
    line-height: 0px;
    display: block;
    margin: 0 auto;
    text-align:left;
    padding: 0 100px;;
    color: rgb(216, 213, 216);;
}

a {
    text-decoration: none;
    color: rgb(82, 34, 194);
}
img {
    display: block;
    margin: 0 auto;
    
}
.forecast-temps {
    font-size: 16px;
}
.forecast-temp-max {
    color: black;

}

</style>

<body id="body">
    <div class="container">
    <div class="wrapper">
        <div class="app">
            <span class="searchBox">
                <div class="row">
                    <div class="col-5">
                        <input type="text" class="form-control" placeholder="Enter the city" id="searchinput">
                    </div>
                    <div class="col-7">
                        <button type="search" class="btn btn-primary" id="searchengine">Search</button>
                        <button type="button" class="btn btn-outline-light" id="currentsearchengine">Current</button>
                    </div>
                </div>
            </span>
            <br>
            <br>
            <br>
            <span class="todayStatus">
                <div class="row">
                    <div class="col">
                        <span class="city" id="cityy"> </span> <br> <span id="day"> </span> <span id="clock"> </span>
                            
                    </div>
            </span>
            <div class="col">
                <span class="firstweather" id="firstweather"> </span>
                <img src=" " alt="" id="icon">
            </div>
            <div class="col">
                <span class="degree"> <span id="degreeNumber"></span>°C</span> 
                    <div class="details">Humidity: <span class="humidity" id="humidity"> </span>% <br> Wind: <span class="wind" id="wind"> </span> km/s </div>
            </div>
        </div>

        <br>
        <em><span class="futureforecast"> Future Forecast </span> </em>
        <hr>
        <div class="otherdays" id="otherdays"> </div>
        </div>
        </div>
        <div class="codeby"> <a href="https://github.com/Raha-P/Weather-app">open-source code</a> by Raha Pedram fard</div>
    

    <script>


        function changeCityTemp(response) {
            console.log(response);
            document.querySelector("#cityy").innerHTML = response.data.name;
            document.querySelector("#degreeNumber").innerHTML = Math.round(response.data.main.temp);
            document.querySelector("#wind").innerHTML = Math.round(response.data.wind.speed);
            document.querySelector("#humidity").innerHTML = response.data.main.humidity;
            document.querySelector("#firstweather").innerHTML = response.data.weather[0].main;
            document.querySelector("#icon").setAttribute("src", "http://openweathermap.org/img/wn/" +response.data.weather[0].icon+ "@2x.png");

        }
        
        function displayforecastforotherdays() {
            let forecastHTML = `<div class="row">`;
            let days2 = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
            days2.forEach(function(day) {forecastHTML = forecastHTML + `
                <div class="col-2">
                    <div class="forcast-date">${day}</div>
                    <div class="emoji1">⛅️</div>
                    <div class="forecast-temps">
                        <span class="forecast-temp-max">18°</span> <span class="forecast-temp-min">10°</span>
                    </div>
                </div>`;
            })
            forecastElement.innerHTML = forecastHTML;   
        }
        let forecastElement = document.querySelector("#otherdays");
        displayforecastforotherdays();

            

        


        function defaultt(cityyy) {
            let apiKey = "8944afa6845bd7c413a687258d3211ef";
            let apiUrl = "https://api.openweathermap.org/data/2.5/weather?q=" + cityyy + "&appid=" + apiKey + "&units=metric";
            axios.get(apiUrl).then(changeCityTemp);
        }


        function changeCity(event) {
            event.preventDefault();
            let cityyy = document.querySelector("#searchinput").value;
            defaultt(cityyy);

        }


        function currentstatus1() {
            navigator.geolocation.getCurrentPosition(currentstatus);
        }

        function currentstatus(position) {
            let apiKey = "5f472b7acba333cd8a035ea85a0d4d4c";
            let lat = position.coords.latitude;
            let lon = position.coords.longitude;
            let url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`;
            axios.get(url).then(changeCityTemp);
        }



        let now = new Date();
        let clock = document.querySelector("#clock");
        let hours = now.getHours();
        let minutes = now.getMinutes();
        
        if (minutes<10) {
            clock.innerHTML = hours + ":0" + minutes;}
            else {
                clock.innerHTML = hours + ":" + minutes;
            }


        let days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        let currentday = days[now.getDay()];
        document.querySelector("#day").innerHTML = currentday;


        let searchbuttom = document.querySelector("#searchengine");
        searchbuttom.addEventListener("click", changeCity);


        let currentsearchbuttom = document.querySelector("#currentsearchengine");
        currentsearchbuttom.addEventListener("click", currentstatus1);

        defaultt("tehran");

        ///if (response.data.weather[0].icon == "11n") {



    

    </script>


</body>

</html>